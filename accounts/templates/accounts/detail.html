{% extends 'base.html' %}

{% block content %}
{% if user.profile_image %}
<img class="image" src="{{ user.profile_image.url }}" />
{% endif %}
<div>
    <h1 class="tit">My Page</h1>
    <div class="d-flex justify-content-between">
        <div>
            <h3>{{user.username }}님</h3>
            <p>{{user.email}}</p>
            <a href="{% url 'accounts:update' %}" class="btnC">정보 수정</a>
        </div>
        <div>
            <div class="d-flex text-center">
                <div class="me-3">
                    <p>팔로잉</p>
                    <span>{{user.followings.count}}</span>
                </div>
                <div>
                    <p>팔로워</p>
                    <span>{{user.follower.count}}</span>
                </div>
            </div>
            <!--로그인 유무에 따라 팔로우 가능, 자기 자신이 팔로우 금지해둠-->
            {% if request.user != user %}
            {% if request.user.is_authenticated %}
            {% if user not in request.user.followings.all %}
            <div class="text-center">
                <a href="{% url 'accounts:follow' user.pk %}" class="btnC">follow</a>
                {% else %}
                <a href="{% url 'accounts:follow' user.pk %}" class="btnC btn-uf">unfollow</a>
            </div>
            {% endif %}
        </div>
        {% else %}
        <div>
            <a href="{% url 'accounts:login' %}">로그인하세요</a>
        </div>
        {% endif %}
    </div>
    {% endif %}
    <!--자기자신만 정보 수정 링크 보이게 해둠-->
    {% if request.user.pk == user.pk %}

</div>
{% endif %}
{% endblock content %}